### 日曜日

午前中は家でだらだら。
ようつべ見て、冷蔵庫の焼きそばを食べたらあっという間に時間が過ぎた。

お昼から外出。
目的地は代々木公園だったが、下北沢から歩いて行くことにした。
吉祥寺駅から京王井の頭線の急行で下北沢へ到着。
[９月の東京観光](https://github.com/toasa/diary/blob/main/2022/09/09.md)以来だったので、本多劇場までの道中が懐かしかった：

<img src="https://i.imgur.com/6e2w1iY.jpg" width="500">

予定通り下北沢から代々木公園へ向かう。
途中「東北沢」という駅を見つけた。
右北沢じゃないと名前付けに一貫性がないけどな（それか南北沢にするか）とツッコミながら通り過ぎる。駅の入口はカッコよかった：

<img src="https://i.imgur.com/iCJ60FM.jpg" width="700">

そのまま北東に進み、県道413号線に合流した。
富ヶ谷交差点を下北沢方面から見た図。
雲の峰よりつづきけんという感じ：

<img src="https://i.imgur.com/EaGGVM8.jpg" width="700">

代々木公園に到着。催し物はおそらくなかったと思うが、かなりの人手で、
大学生、家族連れ、ランナー、お年寄りなどありとあらゆる人がいた。
来園者も多様性があったほうが面白いなと感じた。

公園ではベンチに座ったり、散歩したりなどした。
噴水の前のベンチは人気のようで、空いた席も数十秒で別の方が座っていた：

<img src="https://i.imgur.com/9xJFKWu.jpg" width="700">

<img src="https://i.imgur.com/0yGj9S7.jpg" width="700">

入園時は日は高かったが、出るときは夕暮れだった。

<img src="https://i.imgur.com/Uzlifpz.jpg" width="700">

<img src="https://i.imgur.com/eyf4m7Y.jpg" width="700">

帰りは公園から新宿駅まで歩き中央線に乗った。
結構歩いたので２万歩は超えたなと思ったけど、帰宅して確認すると 16,000 ほどだった。

### 「コード読みの話はみんな分かってない、という雑談」

またまた有野さんの「プログラム雑談」のエピソード：

https://anchor.fm/karino2/episodes/114-elacdq

以下まとめ：

- そもそもコード読みは難しい技術
- こうすれば読めるという方法論はない
    - 例えばある関数を中まで読むか、それとも関数名や引数などのシグネチャだけを把握するか、判断する基準はなく経験としかいえない。
    - コンパイラはあらゆるコードを「読める」けど、コードがかなり読める人でも失敗することはある。ただ読めない人よりは打率が良い。
- コード読みの楽しさとは
    - 最初は一部分から理解していき、各コンポーネントの理解が有機的につながっていき、全体像がわかる楽しみ。
        - Minesweeper や数独に近い。
    - 読んでいく過程が面白いのであって、巷に出回るコードリーディングを勧めるブログポストはすでに読み終わったコードを解説しているだけなのでけしからん。
- コード読みの上達方法
    - ドキュメント化されたノウハウはなさそう。
    - 英作文の添削のように、読み手と先生役がいて、①読む②理解した内容を伝える③フィードバックを受ける、をループすると良いのでは。

有野さんが実際に Tensorflow のコードを読む（すでに理解したコードの解説ではなく、理解する過程を紹介する）動画：

https://www.youtube.com/watch?v=_JB3ClT1riM

### Golang の Generics は代数的データ型として使えるか？

[lisp-rs](https://github.com/vishpat/lisp-rs)を見ていて、
やっぱり代数的データ型（ADT）を使うと処理系のコードはきれいに書けるよなあと実感した。
Golang では 1.18 から Generics が入ったので、ADT を作れるのかと一瞬おもったけど、
どうもできないっぽい。

ググって自分が理解した範囲だと Generics の目的は、何かしらの共通するふるまい（例えば comparable など）を持つ複数の型を１つの抽象的な型にまとめることだと思う。
ADT でやりたいのはそのように型を共通化することではなく、disjoint なまま各 variant にデータを持たせたいことなので、Generics はお門違いだった。

なお Go に ADT を入れようという proposal は既に出ていて、今も open になっている：

https://github.com/golang/go/issues/19412

余談だけど ADT って別名が多い気がするなーと思って調べてみた。
[こちら](https://zenn.dev/uhyo/scraps/13760c3798d8ce)を参照すると４つもあった。。。：

- 判別共用体 (Discriminated Union)
- 直和型 (Disjoint Union)
- タグ付き共用体 (Tagged Union)
- 代数的データ型 (ADT)
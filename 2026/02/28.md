### 土曜日

[蟹ヌテラ武器庫](https://www.youtube.com/watch?v=CcyVU_Iq7Hk)。

---

Python3 の BLE ライブラリである [bleak](https://bleak.readthedocs.io/en/latest/)をさわる。
bleak でセントラル側のソフトを作成し（以下）、
[nRF Connect for Mobile](https://play.google.com/store/apps/details?id=no.nordicsemi.android.mcp&hl=ja) というスマホアプリで、
ペリフェラル側のデバイスをセットアップする。

```python
import asyncio
from bleak import BleakScanner, BleakClient

TARGET_DEVICE_NAME = "TestDevice"
CHARACTERISTIC_UUID = "1111"

async def main():
    print(f"Scanning {TARGET_DEVICE_NAME}...")

    device = await BleakScanner.find_device_by_name(TARGET_DEVICE_NAME, timeout=10.0)
    if device is None:
        print(f"Error: {TARGET_DEVICE_NAME} not found")
        return

    print(f"Device found! MAC address: {device.address}")
    print(f"Try to connect...")

    async with BleakClient(device) as client:
        print(f"Connection status: {client.is_connected}")

        if not client.is_connected:
            print("Failed to connect")
            return

        print("Connection succeeded! Start to transmission\n")

        try:
            message = "Hello from Python!"
            data_to_send = message.encode('utf-8')

            print(f"Write test: '{message}'")
            await client.write_gatt_char(CHARACTERISTIC_UUID, data_to_send)
            print("Write Complete")

            await asyncio.sleep(8.0)

            print("Read test...")
            read_data = await client.read_gatt_char(CHARACTERISTIC_UUID)
            decoded_data= read_data.decode('utf-8', errors='ignore')

            print(f"Rx data (Raw): {read_data}")
            print(f"Rx data (Text): {decoded_data}\n")

        except Exception as e:
            print(f"Error: {e}")

    print("Disconnect")

if __name__ == "__main__":
    asyncio.run(main())
```


### 今月の歩数

|||
|---|---|
|歩数|378,608|
|ハートポイント|2,666|

### 月曜日

浅草散歩。
友人にバーガーキングを紹介する。
気に入ってもらえたようでよかった。
青柳総本家浅草店は残念ながらお休み。ういろうはたまに食べたくなる。

---

[marp](https://marp.app/)。
マークダウン記法でスライドを作成できる。
[オンラインのエディタ](https://marpwebeditor.app/)を少しさわってみる。
かなり良さそう。

---

ランニング中にラジオを聴きたくなり、
カナル型のワイヤレスイヤホンを試してみたがイマイチ。
耳が塞がれ外部の環境音が聞こえづらくなるため、
車や自転車の走行音が聞こえない危なさと、
せっかく外に出ているのに内に閉じこもっている楽しくなさがある。
てなわけで Shokz の [OpenRun](https://jp.shokz.com/products/openrun) を買う。
吉祥寺のヨドバシカメラで、12,420円。
定価は 17,888 円なので 30% ほど値引きされてた。
値引きが効いたのは、バンドサイズが標準の長さで、充電方式がマグネットタイプのもの。
もう一つの充電タイプは USB Type-C で、それだとスマホの充電ケーブルを流用できて人気なのかも。

---

マラソン界隈の用語で 「サブエガ」を知る。

### BLE

自分の Linux 環境は、
macOS で OrbStack を使用して Linux 環境を作っている。
この環境で BLE パケットを取得してみたいと思い、`socket(AF_BLUETOOTH, SOCK_RAW, BTPROTO_HCI);` を動かすが、成功しない。
"socket: Address family not supported by protocol" というエラー。
そもそも macOS の Bluetooth デバイスが Linux にパススルーされていないみたい。
デバイスは macOS に見せているので、Linux に見えないのは当たり前か。
となると、どうしようか。

やりたいこととしては、BLE のパケットをキャプチャして、プロトコルスタック内の各レイヤの中身を見てみたい。
思い浮かぶ方法は３つ。
１つ目は、 N100 などのミニPC を買ってきて Ubuntu を入れて Linux 環境を用意する方法。
２つ目は、Bluetooth の USB ドングルを買ってきて、
QEMU などで Linux 環境を作り、その環境に USB パススルーで Bluetooth デバイスを見せる方法。
３つ目は、macOS で BLE のパケットキャプチャを行い、pcap の解析を Wireshark で行う。
３つ目はハードウェアの調達がいらないのでお手軽ではある。
